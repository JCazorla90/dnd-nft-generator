<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D NFT Character Forge | Ultimate Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=MedievalSharp&family=Roboto+Mono:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
</head>
<body>

    <div class="bg-overlay"></div>

    <header class="main-header">
        <div class="logo-area">
            <h1>ğŸ‰ D&D NFT Forge</h1>
            <span class="version-badge">v2.0 Ultimate</span>
        </div>
        
        <div class="header-controls">
            <select id="editionSelect" class="edition-select">
                <option value="5e">D&D 5th Edition (SRD)</option>
                <option value="3.5">D&D 3.5e (Legacy)</option>
                <option value="pathfinder">Pathfinder</option>
            </select>

            <button id="connectWalletBtn" class="btn btn-wallet">
                ğŸ¦Š Conectar Wallet
            </button>
            <span id="walletAddress" class="wallet-address hidden">Not Connected</span>
        </div>
    </header>

    <div class="main-container">
        
        <aside class="control-panel">
            <h2>ğŸ› ï¸ Herramientas</h2>
            
            <div class="panel-section">
                <h3>GeneraciÃ³n</h3>
                <button id="btnGenerateRandom" class="btn btn-primary full-width">ğŸ² Generar Aleatorio</button>
                <button id="btnOpenWizard" class="btn btn-gold full-width">ğŸ§™ Crear a Medida</button>
            </div>

            <div class="panel-section">
                <h3>Bestiario & Caos</h3>
                <button id="btnGenerateMonster" class="btn btn-danger full-width">ğŸº Monstruo Aleatorio</button>
                <button id="btnChaosBeast" class="btn btn-chaos full-width">ğŸŒ€ Bestia del Caos</button>
                <button id="btnEncounter" class="btn btn-secondary full-width">âš”ï¸ Generar Encuentro</button>
            </div>

            <div class="panel-section">
                <h3>ExportaciÃ³n</h3>
                <button id="btnExportPDF" class="btn btn-outline full-width">ğŸ“„ Descargar PDF</button>
                <button id="btnExportJSON" class="btn btn-outline full-width">ğŸ’¾ Guardar JSON</button>
                <button id="btnMintNFT" class="btn btn-purple full-width" disabled>ğŸ’ Mint NFT</button>
            </div>
            
            <div class="panel-section">
                <h3>Historial</h3>
                <ul id="historyList" class="history-list-sidebar"></ul>
                <button id="btnClearHistory" class="btn-text">Borrar Historial</button>
            </div>
        </aside>

        <main class="display-area">
            
            <div id="wizard-container" class="hidden"></div>

            <div id="characterSheet" class="sheet-container hidden">
                <div class="sheet-header-row">
                    <div class="portrait-frame">
                        <img id="charImage" src="https://via.placeholder.com/300x300?text=Waiting+for+AI..." alt="Character Portrait">
                        <button id="btnRegenImage" class="btn-mini">ğŸ¨ Regenerar Imagen</button>
                    </div>
                    
                    <div class="header-stats">
                        <h2 id="charName" class="epic-title">Nombre del HÃ©roe</h2>
                        <p class="char-meta"><span id="charRace">Raza</span> <span id="charClass">Clase</span> â€¢ Nivel <span id="charLevel">1</span></p>
                        <p class="char-submeta"><span id="charBackground">Trasfondo</span> â€¢ <span id="charAlignment">Alineamiento</span></p>
                        
                        <div class="combat-stats">
                            <div class="combat-box">ğŸ›¡ï¸ AC <span id="valAC">10</span></div>
                            <div class="combat-box">â¤ï¸ HP <span id="valHP">10</span></div>
                            <div class="combat-box">âš¡ INIT <span id="valInit">+0</span></div>
                        </div>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="ability-score"><label>FUE</label><span id="statStr">10</span><small id="modStr">+0</small></div>
                    <div class="ability-score"><label>DES</label><span id="statDex">10</span><small id="modDex">+0</small></div>
                    <div class="ability-score"><label>CON</label><span id="statCon">10</span><small id="modCon">+0</small></div>
                    <div class="ability-score"><label>INT</label><span id="statInt">10</span><small id="modInt">+0</small></div>
                    <div class="ability-score"><label>SAB</label><span id="statWis">10</span><small id="modWis">+0</small></div>
                    <div class="ability-score"><label>CAR</label><span id="statCha">10</span><small id="modCha">+0</small></div>
                </div>

                <div class="sheet-body">
                    <div class="col">
                        <h3>ğŸ’ Equipo</h3>
                        <ul id="listEquipment" class="data-list"></ul>
                    </div>
                    <div class="col">
                        <h3>âœ¨ Rasgos & Habilidades</h3>
                        <ul id="listTraits" class="data-list"></ul>
                    </div>
                    <div class="col">
                        <h3>ğŸ“œ Hechizos / Acciones</h3>
                        <ul id="listSpells" class="data-list"></ul>
                    </div>
                </div>
            </div>

            <div id="monsterCard" class="monster-card hidden">
                <div class="monster-header">
                    <h2 id="monsterName">Nombre del Monstruo</h2>
                    <span id="monsterCR" class="cr-badge">CR 1</span>
                </div>
                <p id="monsterMeta">TamaÃ±o Tipo, Alineamiento</p>
                <hr>
                <div class="monster-stats">
                    <p><strong>Armor Class:</strong> <span id="monsterAC">10</span></p>
                    <p><strong>Hit Points:</strong> <span id="monsterHP">10</span></p>
                    <p><strong>Speed:</strong> <span id="monsterSpeed">30 ft.</span></p>
                </div>
                <hr>
                <div id="monsterAbilities" class="monster-section"></div>
                <div id="monsterActions" class="monster-section">
                    <h3>Acciones</h3>
                </div>
            </div>

            <div id="welcomeState" class="welcome-screen">
                <h2>Bienvenido a la Forja</h2>
                <p>Selecciona una opciÃ³n en el panel izquierdo para comenzar.</p>
                <p>Conecta tu Wallet para habilitar funciones NFT.</p>
            </div>

        </main>
    </div>

    <script src="dnd-monsters.js" defer></script>
    <script src="dnd-data.js" defer></script>
    <script src="dnd-apis.js" defer></script> <script src="character-wizard.js" defer></script> <script src="app.js" defer></script> </body>
</html>
