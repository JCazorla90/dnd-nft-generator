<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ² D&D Character Forge - NFT Edition</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css?family=UnifrakturCook:700|Crimson+Pro:400,700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ² D&D Character Forge ğŸ›¡ï¸</h1>
      <p class="subtitle">Generador de Personajes para Dragones y Mazmorras - NFT Edition</p>
      <div class="header-controls">
        <select id="editionSelect" class="edition-select">
          <option value="5e">D&D 5e</option>
          <option value="3.5e">D&D 3.5e (prÃ³ximamente)</option>
        </select>
        <button id="toggleTheme" class="theme-toggle" title="Cambiar tema">ğŸŒ“</button>
        <a href="https://github.com/JCazorla90/dnd-nft-generator" class="github-link" target="_blank">â­ Ver en GitHub</a>
      </div>
    </header>

    <!-- SECCIÃ“N BESTIARIO -->
<section class="bestiary-section">
  <h2>ğŸ‰ Bestiario D&D - Generador de Enemigos</h2>
  
  <div class="bestiary-controls">
    <div class="filter-group">
      <label>Tipo de Criatura:</label>
      <select id="creatureTypeFilter">
        <option value="">Todos</option>
        <option value="AberraciÃ³n">AberraciÃ³n</option>
        <option value="Bestia">Bestia</option>
        <option value="Celestial">Celestial</option>
        <option value="DragÃ³n">DragÃ³n</option>
        <option value="Demonio">Demonio</option>
        <option value="Gigante">Gigante</option>
        <option value="Humanoide">Humanoide</option>
        <option value="No-muerto">No-muerto</option>
        <option value="Monstruosidad">Monstruosidad</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label>Challenge Rating:</label>
      <select id="crFilter">
        <option value="">Todos</option>
        <option value="1/4">CR 1/4</option>
        <option value="1/2">CR 1/2</option>
        <option value="1">CR 1</option>
        <option value="2">CR 2</option>
        <option value="3">CR 3</option>
        <option value="5">CR 5</option>
        <option value="8">CR 8</option>
        <option value="10">CR 10</option>
        <option value="13">CR 13+</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label>Ambiente:</label>
      <select id="environmentFilter">
        <option value="">Todos</option>
        <option value="Mazmorra">Mazmorra</option>
        <option value="Bosque">Bosque</option>
        <option value="MontaÃ±a">MontaÃ±a</option>
        <option value="Pantano">Pantano</option>
        <option value="SubterrÃ¡neo">SubterrÃ¡neo</option>
      </select>
    </div>
    
    <button id="generateCreatureBtn" class="btn btn-primary">ğŸ² Generar Criatura</button>
    <button id="generateFromAPIBtn" class="btn btn-secondary">ğŸ“š Desde API D&D</button>
  </div>
  
  <div class="encounter-generator">
    <h3>Generador de Encuentros</h3>
    <div class="encounter-controls">
      <input type="number" id="partyLevel" value="5" min="1" max="20" placeholder="Nivel del grupo">
      <input type="number" id="partySize" value="4" min="1" max="8" placeholder="TamaÃ±o del grupo">
      <button id="generateEncounterBtn" class="btn">âš”ï¸ Generar Encuentro</button>
    </div>
    <div id="encounterPanel" class="hidden">
      <p><strong>XP del Encuentro:</strong> <span id="encounterXP"></span></p>
      <div id="encounterList"></div>
    </div>
  </div>
</section>

<!-- FICHA DE CRIATURA -->
<div id="creatureSheet" class="character-sheet hidden">
  <div class="sheet-header">
    <h2 id="creatureName">Nombre Criatura</h2>
    <p id="creatureType">Tipo y TamaÃ±o</p>
    <div class="creature-cr">
      <span id="creatureCR">CR</span>
      <span id="creatureXP">XP</span>
    </div>
  </div>
  
  <div class="creature-visual">
    <img id="creaturePortrait" src="" alt="Retrato criatura">
    <button id="regenCreaturePortrait" class="btn btn-small">ğŸ”„ Regenerar</button>
  </div>
  
  <div class="creature-stats">
    <h3>EstadÃ­sticas de Combate</h3>
    <div class="combat-stats">
      <div><strong>CA:</strong> <span id="creatureAC"></span></div>
      <div><strong>HP:</strong> <span id="creatureHP"></span></div>
      <div><strong>Velocidad:</strong> <span id="creatureSpeed"></span></div>
    </div>
    
    <h3>CaracterÃ­sticas</h3>
    <div class="ability-scores">
      <div><strong>FUE:</strong> <span id="creatureStr"></span></div>
      <div><strong>DES:</strong> <span id="creatureDex"></span></div>
      <div><strong>CON:</strong> <span id="creatureCon"></span></div>
      <div><strong>INT:</strong> <span id="creatureInt"></span></div>
      <div><strong>SAB:</strong> <span id="creatureWis"></span></div>
      <div><strong>CAR:</strong> <span id="creatureCha"></span></div>
    </div>
    
    <h3>Habilidades</h3>
    <ul id="creatureSkills"></ul>
    
    <h3>Rasgos Especiales</h3>
    <ul id="creatureTraits"></ul>
    
    <h3>Acciones</h3>
    <ul id="creatureActions"></ul>
    
    <div id="legendarySection" class="hidden">
      <h3>Acciones Legendarias</h3>
      <ul id="creatureLegendaryActions"></ul>
    </div>
    
    <h3>Defensas</h3>
    <p id="creatureDefenses"></p>
    
    <h3>Ambiente</h3>
    <p id="creatureEnvironment"></p>
  </div>
  
  <button id="newCreatureBtn" class="btn">ğŸ†• Nueva Criatura</button>
</div>


    <!-- Power Bar -->
    <div id="powerBar" class="power-bar">
      <span id="powerLevel">â­â­â­ Novato</span>
    </div>

    <div class="main-content">
      <!-- Panel de generaciÃ³n -->
      <div class="card generator-panel">
        <h2>âš”ï¸ Crear Personaje</h2>
        
        <div class="generation-mode">
          <button id="randomBtn" class="btn btn-primary">ğŸ² Generar Aleatorio</button>
          <button id="toggleCustom" class="btn btn-secondary">âœï¸ Personalizar</button>
        </div>

        <div id="customPanel" class="custom-panel hidden">
          <h3>Personalizar Personaje</h3>
          
          <div class="form-group">
            <label for="charName">Nombre del Personaje:</label>
            <input type="text" id="charName" placeholder="Ej: Thorin Escudo de Roble">
          </div>

          <div class="form-group">
            <label for="raceSelect">Raza:</label>
            <select id="raceSelect"></select>
          </div>

          <div class="form-group">
            <label for="classSelect">Clase:</label>
            <select id="classSelect"></select>
          </div>

          <div class="form-group">
            <label for="backgroundSelect">Trasfondo:</label>
            <select id="backgroundSelect"></select>
          </div>

          <div class="form-group">
            <label for="alignmentSelect">Alineamiento:</label>
            <select id="alignmentSelect"></select>
          </div>

          <button id="customGenerateBtn" class="btn btn-primary">âœ¨ Crear Personalizado</button>
        </div>
      </div>

      <!-- Panel de ficha -->
      <div id="characterSheet" class="card character-sheet hidden">
        <div class="sheet-header">
          <h2 id="charTitle">Personaje Generado</h2>
          <div class="header-buttons">
            <button id="downloadBtn" class="btn btn-success">ğŸ“¥ Descargar PDF</button>
            <button id="mintNFTBtn" class="btn btn-nft">ğŸª™ Mintear NFT</button>
            <button id="exportJSONBtn" class="btn btn-secondary">â¬‡ï¸ Exportar JSON</button>
            <button id="importJSONBtn" class="btn btn-secondary">â¬†ï¸ Importar JSON</button>
            <input type="file" id="fileImport" accept=".json" style="display:none">
          </div>
        </div>

        <!-- Avatar y Retrato AI -->
        <div class="character-visuals">
          <div class="avatar-container">
            <h3>Avatar</h3>
            <svg id="charAvatar" width="120" height="120" class="character-avatar"></svg>
          </div>
          <div class="portrait-container">
            <h3>Retrato AI</h3>
            <img id="aiPortrait" src="" alt="Retrato generado por IA" class="ai-portrait">
            <button id="regenPortrait" class="btn btn-small">ğŸ”„ Regenerar</button>
          </div>
        </div>

        <div class="character-info">
          <div class="info-section">
            <h3>ğŸ“‹ InformaciÃ³n BÃ¡sica</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Nombre:</span>
                <span id="displayName" class="value">-</span>
              </div>
              <div class="info-item">
                <span class="label">Raza:</span>
                <span id="displayRace" class="value">-</span>
              </div>
              <div class="info-item">
                <span class="label">Clase:</span>
                <span id="displayClass" class="value">-</span>
              </div>
              <div class="info-item">
                <span class="label">Nivel:</span>
                <span id="displayLevel" class="value">1</span>
              </div>
              <div class="info-item">
                <span class="label">Trasfondo:</span>
                <span id="displayBackground" class="value">-</span>
              </div>
              <div class="info-item">
                <span class="label">Alineamiento:</span>
                <span id="displayAlignment" class="value">-</span>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ğŸ’ª CaracterÃ­sticas</h3>
            <div class="stats-grid">
              <div class="stat-box">
                <div class="stat-name">FUE</div>
                <div class="stat-value" id="statStr">10</div>
                <div class="stat-modifier" id="modStr">+0</div>
              </div>
              <div class="stat-box">
                <div class="stat-name">DES</div>
                <div class="stat-value" id="statDex">10</div>
                <div class="stat-modifier" id="modDex">+0</div>
              </div>
              <div class="stat-box">
                <div class="stat-name">CON</div>
                <div class="stat-value" id="statCon">10</div>
                <div class="stat-modifier" id="modCon">+0</div>
              </div>
              <div class="stat-box">
                <div class="stat-name">INT</div>
                <div class="stat-value" id="statInt">10</div>
                <div class="stat-modifier" id="modInt">+0</div>
              </div>
              <div class="stat-box">
                <div class="stat-name">SAB</div>
                <div class="stat-value" id="statWis">10</div>
                <div class="stat-modifier" id="modWis">+0</div>
              </div>
              <div class="stat-box">
                <div class="stat-name">CAR</div>
                <div class="stat-value" id="statCha">10</div>
                <div class="stat-modifier" id="modCha">+0</div>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>â¤ï¸ Combate</h3>
            <div class="combat-grid">
              <div class="combat-item">
                <span class="label">Puntos de Golpe:</span>
                <span id="displayHP" class="value big">-</span>
              </div>
              <div class="combat-item">
                <span class="label">Clase de Armadura:</span>
                <span id="displayAC" class="value big">10</span>
              </div>
              <div class="combat-item">
                <span class="label">Velocidad:</span>
                <span id="displaySpeed" class="value">30 ft</span>
              </div>
              <div class="combat-item">
                <span class="label">Iniciativa:</span>
                <span id="displayInit" class="value">+0</span>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ğŸ›¡ï¸ Salvaciones y Habilidades</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Salvaciones:</span>
                <span id="displaySavingThrows" class="value">-</span>
              </div>
              <div class="info-item">
                <span class="label">Habilidades:</span>
                <span id="displaySkills" class="value">-</span>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ğŸ’ Equipo Inicial</h3>
            <ul id="equipment" class="traits-list"></ul>
          </div>

          <div class="info-section">
            <h3>ğŸ’¼ Trasfondo: <span id="backgroundName"></span></h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Habilidades:</span>
                <span id="backgroundSkills" class="value">-</span>
              </div>
              <div class="info-item">
                <span class="label">Rasgo:</span>
                <span id="backgroundFeature" class="value">-</span>
              </div>
            </div>
            <h4 style="margin-top: 15px; color: #667eea;">Equipo de trasfondo:</h4>
            <ul id="backgroundEquipment" class="traits-list"></ul>
          </div>

          <div class="info-section">
            <h3>ğŸ­ Rasgos Raciales</h3>
            <ul id="racialTraits" class="traits-list"></ul>
          </div>

          <div class="info-section">
            <h3>âš”ï¸ Competencias y Rasgos de Clase</h3>
            <ul id="classProficiencies" class="traits-list"></ul>
          </div>

          <div class="info-section">
            <h3>âœ¨ CaracterÃ­sticas de Clase</h3>
            <ul id="classFeatures" class="traits-list"></ul>
          </div>
        </div>

        <div class="actions">
          <button id="newCharBtn" class="btn btn-primary">ğŸ”„ Nuevo Personaje</button>
          <button id="shareBtn" class="btn btn-secondary">ğŸ“¤ Compartir</button>
          <button id="historyBtn" class="btn btn-secondary">ğŸ—‚ï¸ Historial</button>
        </div>
      </div>
    </div>

    <!-- Modal de Historial -->
    <div id="historyModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>ğŸ“œ Historial de Personajes</h2>
        <div id="historyList"></div>
      </div>
    </div>

    <footer>
      <p>ğŸ² D&D NFT Character Forge | <a href="https://github.com/JCazorla90/dnd-nft-generator">GitHub</a></p>
      <p>Sistema de Referencia D&D 5e | Creado con â¤ï¸ por la comunidad</p>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="data/dnd-data.js"></script>
  <script src="app.js"></script>
</body>
</html>
