<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Character Forge - Generador Ã‰pico</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Marck+Script&family=MedievalSharp&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="header-decoration">âš”ï¸</div>
        <div class="header-content">
            <h1 class="main-title">D&D Character Forge</h1>
            <p class="subtitle">Generador Ã‰pico de Personajes y Bestiario</p>
        </div>
        <div class="header-decoration">ğŸ‰</div>
    </header>

    <div class="container">
        
        <section class="edition-selector">
            <label for="editionSelect">ğŸ“– Reglas:</label>
            <select id="editionSelect">
                <option value="5e" selected>D&D 5e</option>
                <option value="3.5e">D&D 3.5e</option>
            </select>
        </section>

        <section class="generator-section">
            <h2 class="section-title"><span class="title-decoration">âš”ï¸</span> Forja de HÃ©roes <span class="title-decoration">âš”ï¸</span></h2>

            <div class="controls-grid">
                <button id="randomBtn" class="btn btn-secondary btn-large">
                    ğŸ² RANDOM <span class="btn-subtitle">Aventurero RÃ¡pido</span>
                </button>
                <button id="chaosBtn" class="btn btn-accent btn-large">
                    ğŸŒ€ CHAOS <span class="btn-subtitle">Â¡Pura Locura!</span>
                </button>
            </div>

            <div class="custom-panel-toggle">
                <button id="toggleCustomBtn" class="btn btn-gold full-width">âš™ï¸ Personalizar Opciones</button>
            </div>

            <div id="customPanel" class="custom-panel hidden">
                <div class="custom-grid">
                    <div class="form-group"><label>Nombre</label><input type="text" id="charName" placeholder="Ej: Valerius"></div>
                    <div class="form-group"><label>Raza</label><select id="raceSelect"><option value="">Aleatorio</option></select></div>
                    <div class="form-group"><label>Clase</label><select id="classSelect"><option value="">Aleatorio</option></select></div>
                    <div class="form-group"><label>Trasfondo</label><select id="backgroundSelect"><option value="">Aleatorio</option></select></div>
                    <div class="form-group"><label>Alineamiento</label><select id="alignmentSelect"><option value="">Aleatorio</option></select></div>
                </div>
                <button id="customGenerateBtn" class="btn btn-primary full-width">âœ¨ Forjar HÃ©roe</button>
            </div>
        </section>

        <div id="characterSheet" class="character-sheet hidden">
            <div class="sheet-header">
                <h2 id="displayName" class="character-name">Nombre del HÃ©roe</h2>
                <div class="character-subtitle">
                    <span id="displayRace">Raza</span> <span class="separator">â€¢</span> 
                    <span id="displayClass">Clase</span> <span class="separator">â€¢</span> 
                    Nivel <span id="displayLevel">1</span>
                </div>
                <div class="character-meta">
                    <span id="displayBackground">Trasfondo</span> <span class="separator">|</span> 
                    <span id="displayAlignment">Alineamiento</span>
                </div>
            </div>

            <div class="character-visual">
                <div class="portrait-frame"><img id="aiPortrait" src="" alt="Retrato"><button id="regenPortrait" class="regen-btn" title="Regenerar Imagen">ğŸ”„</button></div>
                <div class="avatar-frame"></div>
            </div>

            <div class="power-level-container">
                <div class="power-bar-bg"><div id="powerBar" class="power-bar-fill"></div></div>
                <div id="powerLevel" class="power-level-text">â­ Novato</div>
            </div>

            <div class="abilities-section">
                <div class="ability-scores-grid">
                    <div class="ability-shield"><div class="ability-name">FUE</div><div id="statStr" class="ability-value">10</div><div id="modStr" class="ability-modifier">+0</div></div>
                    <div class="ability-shield"><div class="ability-name">DES</div><div id="statDex" class="ability-value">10</div><div id="modDex" class="ability-modifier">+0</div></div>
                    <div class="ability-shield"><div class="ability-name">CON</div><div class="ability-value" id="statCon">10</div><div id="modCon" class="ability-modifier">+0</div></div>
                    <div class="ability-shield"><div class="ability-name">INT</div><div class="ability-value" id="statInt">10</div><div id="modInt" class="ability-modifier">+0</div></div>
                    <div class="ability-shield"><div class="ability-name">SAB</div><div class="ability-value" id="statWis">10</div><div id="modWis" class="ability-modifier">+0</div></div>
                    <div class="ability-shield"><div class="ability-name">CAR</div><div class="ability-value" id="statCha">10</div><div id="modCha" class="ability-modifier">+0</div></div>
                </div>
            </div>

            <div class="combat-stats-grid">
                <div class="combat-stat"><div class="stat-icon">â¤ï¸</div><div class="stat-label">HP</div><div id="displayHP" class="stat-value">10</div></div>
                <div class="combat-stat"><div class="stat-icon">ğŸ›¡ï¸</div><div class="stat-label">AC</div><div id="displayAC" class="stat-value">10</div></div>
                <div class="combat-stat"><div class="stat-icon">ğŸ‘Ÿ</div><div class="stat-label">Vel</div><div id="displaySpeed" class="stat-value">30</div></div>
                <div class="combat-stat"><div class="stat-icon">âš¡</div><div class="stat-label">Init</div><div id="displayInit" class="stat-value">+0</div></div>
            </div>

            <div class="detail-section full-width">
                <div class="detail-panel">
                    <h3 class="section-subtitle">ğŸ’¾ Tiradas de SalvaciÃ³n</h3>
                    <p id="displaySaves" class="trait-list-inline">â€”</p>
                </div>
                <div class="detail-panel">
                    <h3 class="section-subtitle">ğŸ¯ Habilidades (Skills)</h3>
                    <p id="displaySkills" class="trait-list-inline">â€”</p>
                </div>
            </div>

            <div class="details-section">
                <div class="detail-panel"><h3>ğŸ’ Equipo</h3><ul id="equipment" class="trait-list"></ul></div>
                <div class="detail-panel"><h3>âœ¨ Rasgos Raciales</h3><ul id="racialTraits" class="trait-list"></ul></div>
                <div class="detail-panel"><h3>âš”ï¸ Habilidades de Clase</h3><ul id="classFeatures" class="trait-list"></ul></div>
                <div class="detail-panel background-panel">
                    <h3>ğŸ“œ Trasfondo: <span id="backgroundName"></span></h3>
                    <p><strong>Rasgo:</strong> <span id="backgroundFeature"></span></p>
                    <p><strong>Equipo Extra:</strong> <ul id="backgroundEquipment" class="trait-list"></ul></p>
                </div>
            </div>

            <div class="action-buttons">
                <button id="downloadBtn" class="btn btn-primary">ğŸ“„ PDF</button>
                <button id="exportJSONBtn" class="btn btn-secondary">ğŸ’¾ Guardar</button>
            </div>
        </div>

        <div class="section-divider"><span class="divider-text">ğŸ‘¹ BESTIARIO ğŸ‘¹</span></div>

        <section class="bestiary-section">
            <div class="bestiary-controls">
                <div class="controls-grid">
                    <button id="generateCreatureBtn" class="btn btn-danger">ğŸº Monstruo Local</button>
                    <button id="generateFromAPIBtn" class="btn btn-gold">ğŸ“¡ API D&D 5e</button>
                    <button id="chaosBeastBtn" class="btn btn-accent">ğŸŒ€ Engendro Chaos</button>
                </div>
            </div>

            <div id="creatureSheet" class="creature-sheet hidden">
                <div class="sheet-header">
                    <h2 id="creatureName" class="character-name">Nombre de la Bestia</h2>
                    <div class="character-subtitle">
                        <span id="creatureType">Tipo</span> â€¢ CR <span id="creatureCR">0</span> â€¢ <span id="creatureXP">0 XP</span>
                    </div>
                </div>
                <div class="character-visual">
                    <div class="portrait-frame">
                        <img id="creaturePortrait" src="" alt="Bestia">
                        <button id="regenCreaturePortrait" class="regen-btn">ğŸ”„</button>
                    </div>
                </div>
                
                <div class="combat-stats-grid">
                    <div class="combat-stat"><div class="stat-label">AC</div><div id="creatureAC" class="stat-value">10</div></div>
                    <div class="combat-stat"><div class="stat-label">HP</div><div id="creatureHP" class="stat-value">10</div></div>
                    <div class="combat-stat"><div class="stat-label">VEL</div><div id="creatureSpeed" class="stat-value">30</div></div>
                </div>
                
                <div class="ability-scores-grid small-grid">
                    <div class="ability-shield"><small>FUE</small><div id="creatureStr">10</div></div>
                    <div class="ability-shield"><small>DES</small><div id="creatureDex">10</div></div>
                    <div class="ability-shield"><small>CON</small><div id="creatureCon">10</div></div>
                    <div class="ability-shield"><small>INT</small><div id="creatureInt">10</div></div>
                    <div class="ability-shield"><small>SAB</small><div id="creatureWis">10</div></div>
                    <div class="ability-shield"><small>CAR</small><div id="creatureCha">10</div></div>
                </div>
                
                <div class="details-section">
                    <div class="detail-panel">
                        <h3 class="section-subtitle">âš”ï¸ Acciones</h3>
                        <ul id="creatureActions" class="trait-list"></ul>
                    </div>
                    <div class="detail-panel">
                        <h3 class="section-subtitle">âœ¨ Rasgos Especiales</h3>
                        <ul id="creatureTraits" class="trait-list"></ul>
                    </div>
                    <div class="detail-panel">
                        <h3 class="section-subtitle">ğŸ‘‘ Acciones Legendarias</h3>
                        <ul id="creatureLegendaryActions" class="trait-list"></ul>
                    </div>
                    <div class="detail-panel">
                        <h3 class="section-subtitle">ğŸ›¡ï¸ Defensas</h3>
                        <p id="creatureDefenses" class="trait-list-inline">â€”</p>
                    </div>
                    <div class="detail-panel">
                        <h3 class="section-subtitle">ğŸŒ Ambiente</h3>
                        <p id="creatureEnvironment" class="trait-list-inline">â€”</p>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="newCreatureBtn" class="btn btn-danger">ğŸ†• Nueva Criatura</button>
                </div>
            </div>
        </section>

    </div>

    <div id="historyModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">âœ–ï¸</span>
            <h2>ğŸ“š Historial de Personajes</h2>
            <div id="historyList" class="history-list"></div>
        </div>
    </div>

    <button id="historyBtn" class="floating-history-btn">ğŸ“œ</button>

    <footer class="main-footer">
        <p>âš”ï¸ D&D Character Forge Â© 2025 ğŸ‰</p>
        <p>Creado con â¤ï¸ para la comunidad de Dragones y Mazmorras</p>
        <button id="toggleTheme" class="theme-toggle">ğŸŒ™ Modo Oscuro</button>
    </footer>

    <script src="data/dnd-data.js"></script>
    <script src="data/bestiary.js"></script>
    <script src="data/dnd-monsters.js"></script>
    <script src="api/dnd-apis.js"></script>
    <script src="app.js"></script>

</body>
</html>
