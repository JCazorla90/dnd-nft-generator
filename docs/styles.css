/* ==========================================
   D&D CHARACTER FORGE - ESTILOS ÉPICOS (BG3 Style)
   ========================================== */

@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=MedievalSharp&display=swap');

:root {
  /* Paleta de Colores de Pergamino y Oscuridad */
  --parchment: #e8d5b7;
  --parchment-dark: #d4c4a8;
  --ink-black: #1a0f08;
  
  /* Colores Fantásticos */
  --gold: #d4af37;
  --blood-red: #8b0000;
  --forest-green: #2d5016;
  --royal-purple: #4b0082;
  
  /* Tipografía */
  --font-title: 'MedievalSharp', serif;
  --font-body: 'Cinzel', serif;
  
  /* Estructura */
  --border-radius: 8px;
  --shadow-epic: 0 10px 30px rgba(0,0,0,0.5);
}

/* Modo Oscuro (Mejorado para un mejor contraste) */
body.dark-mode {
  --parchment: #2c1e16; /* Fondo más oscuro */
  --parchment-dark: #1a0f08; /* Borde casi negro */
  --ink-black: #f4e9d8; /* Letra clara */
  --gold: #ffd700; /* Oro más brillante */
}

body {
  font-family: var(--font-body);
  /* Fondo de madera oscura (Textura de ejemplo) */
  background: #121212 url('https://www.transparenttextures.com/patterns/dark-wood.png');
  color: var(--ink-black);
  margin: 0;
  padding-bottom: 50px;
}

.container { max-width: 1000px; margin: 0 auto; padding: 20px; }

/* HEADER */
.main-header {
  background: linear-gradient(to bottom, rgba(0,0,0,0.9), rgba(40,20,10,0.8));
  border-bottom: 4px solid var(--gold);
  padding: 30px;
  text-align: center;
  color: var(--gold);
  text-shadow: 2px 2px 4px #000;
}
.main-title { 
  font-family: var(--font-title); 
  font-size: 3rem; 
  margin: 0; 
  color: var(--blood-red); 
  text-shadow: 0 0 10px var(--gold); 
}
.subtitle { color: #aaa; font-style: italic; }

/* BOTONES */
.btn {
  font-family: var(--font-title);
  font-weight: bold;
  padding: 12px 24px;
  border: 2px solid var(--ink-black);
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
}
.btn:hover { 
  transform: translateY(-2px); 
  box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
}
.btn-primary { background: var(--blood-red); color: #fff; border-color: #500000; }
.btn-secondary { background: var(--forest-green); color: #fff; border-color: #1a3d0f; }
.btn-gold { background: var(--gold); color: var(--ink-black); }
.btn-accent { background: linear-gradient(45deg, var(--royal-purple), #ff0066); color: white; }
.btn-chaos { background: linear-gradient(90deg, #ff0000, #0000ff, #00ff00); color: white; text-shadow: 1px 1px 0 #000; }
.btn-purple { background: #6a0dad; color: white; }
.btn-mini { padding: 5px 10px; font-size: 0.8rem; }
.btn-large { 
  width: 100%; 
  padding: 20px; 
  font-size: 1.2rem; 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  gap: 5px; 
}
.btn-subtitle { 
  font-size: 0.8rem; 
  opacity: 0.8; 
  font-weight: normal; 
  text-transform: none; 
}

.controls-grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
  gap: 15px; 
  margin-bottom: 20px; 
}
.full-width { width: 100%; }

/* SECCIONES */
.generator-section, .bestiary-section {
  background: rgba(255, 255, 255, 0.05);
  padding: 20px;
  border-radius: var(--border-radius);
  border: 1px solid var(--gold);
  margin-bottom: 30px;
  box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
}
.section-title { 
  text-align: center; 
  color: var(--gold); 
  font-family: var(--font-title); 
  margin-bottom: 20px; 
  font-size: 1.8rem; 
}

/* FORMULARIOS */
.custom-panel { 
  background: var(--parchment); 
  padding: 20px; 
  border-radius: var(--border-radius); 
  border: 2px solid var(--ink-black); 
  margin-top: 15px; 
}
.custom-grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
  gap: 10px; 
  margin-bottom: 15px; 
}
.form-group label { 
  display: block; 
  font-weight: bold; 
  font-size: 0.8rem; 
  margin-bottom: 5px; 
}
select, input { 
  width: 100%; 
  padding: 8px; 
  border: 1px solid var(--ink-black); 
  background: rgba(255,255,255,0.8); 
  font-family: inherit; 
}

/* FICHA DE PERSONAJE (ESTILO PERGAMINO) */
.character-sheet, .creature-sheet {
  background: var(--parchment);
  color: #1a0f08;
  padding: 40px;
  border-radius: 4px;
  box-shadow: var(--shadow-epic);
  border: 10px solid var(--parchment-dark);
  position: relative;
  max-width: 900px;
  margin: 0 auto;
}
.sheet-decoration-top { height: 5px; background: var(--gold); margin-bottom: 20px; }

.sheet-header { 
  text-align: center; 
  margin-bottom: 30px; 
  border-bottom: 2px solid var(--ink-black); 
  padding-bottom: 20px; 
}
.header-skulls { font-size: 1.5rem; letter-spacing: 10px; opacity: 0.3; }
.character-name { 
  font-family: var(--font-title); 
  font-size: 3rem; 
  color: var(--blood-red); 
  margin: 10px 0; 
  text-transform: uppercase; 
  letter-spacing: 2px; 
}
.character-subtitle { font-size: 1.2rem; font-weight: bold; color: var(--ink-black); }
.character-meta { color: #555; font-style: italic; margin-top: 5px; }

/* VISUALES */
.character-visual { 
  display: flex; 
  justify-content: center; 
  gap: 20px; 
  margin-bottom: 30px; 
  flex-wrap: wrap; 
}
.portrait-frame { 
  position: relative; 
  width: 250px; 
  border: 5px solid var(--gold); 
  box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
}
.portrait-frame img { width: 100%; height: auto; display: block; }
.regen-btn { 
  position: absolute; 
  bottom: 10px; 
  right: 10px; 
  background: rgba(0,0,0,0.7); 
  color: white; 
  border: none; 
  border-radius: 50%; 
  width: 30px; 
  height: 30px; 
  cursor: pointer; 
}
.avatar-frame svg { width: 120px; height: 120px; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5)); }

/* POWER BAR */
.power-level-container { 
  text-align: center; 
  margin-bottom: 20px; 
  background: rgba(0,0,0,0.05); 
  padding: 10px; 
  border-radius: 4px; 
}
.power-bar-bg { 
  height: 10px; 
  background: #ccc; 
  border-radius: 5px; 
  overflow: hidden; 
  margin: 5px 0; 
}
.power-bar-fill { 
  height: 100%; 
  background: linear-gradient(90deg, var(--gold), var(--blood-red)); 
  width: 0%; 
  transition: width 1s; 
}
.power-level-text { font-weight: bold; color: var(--blood-red); }

/* STATS GRID */
.abilities-section { margin-bottom: 30px; }
.ability-scores-grid { 
  display: grid; 
  grid-template-columns: repeat(6, 1fr); 
  gap: 10px; 
  text-align: center; 
}
.ability-shield { 
  /* Textura de ejemplo */
  background: url('https://www.transparenttextures.com/patterns/black-scales.png'); 
  background-color: #fff; 
  border: 2px solid var(--ink-black); 
  border-radius: 0 0 20px 20px; 
  padding: 10px 5px; 
  position: relative; 
}
.ability-name { font-size: 0.8rem; font-weight: bold; }
.ability-value { font-size: 1.8rem; font-family: var(--font-title); }
.ability-modifier { 
  position: absolute; 
  top: -10px; 
  left: 50%; 
  transform: translateX(-50%); 
  background: var(--parchment-dark); 
  border: 1px solid black; 
  padding: 2px 5px; 
  font-size: 0.8rem; 
  border-radius: 10px; 
  font-weight: bold; 
}

/* COMBAT GRID */
.combat-stats-grid { 
  display: grid; 
  grid-template-columns: repeat(4, 1fr); 
  gap: 15px; 
  margin-bottom: 30px; 
  text-align: center; 
}
.combat-stat { 
  border: 2px solid var(--gold); 
  padding: 10px; 
  border-radius: 8px; 
  background: rgba(212, 175, 55, 0.1); 
}
.stat-value { font-size: 1.5rem; font-weight: bold; color: var(--blood-red); }

/* DETALLES */
.details-section { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
  gap: 20px; 
}
.detail-panel { 
  background: rgba(255,255,255,0.5); 
  padding: 15px; 
  border-radius: 4px; 
  border: 1px solid #ccc; 
}
.detail-panel h3 { 
  margin-top: 0; 
  border-bottom: 1px solid var(--ink-black); 
  font-family: var(--font-title); 
  color: var(--blood-red); 
}
.trait-list { padding-left: 20px; font-size: 0.9rem; }
.background-panel { background: rgba(212, 175, 55, 0.1); border-color: var(--gold); }

.action-buttons { 
  display: flex; 
  justify-content: center; 
  gap: 10px; 
  margin-top: 30px; 
  flex-wrap: wrap; 
}

/* UTILIDADES */
.hidden { display: none !important; }
.section-divider { text-align: center; margin: 40px 0; position: relative; }
.section-divider::before { 
  content: ""; 
  position: absolute; 
  top: 50%; 
  left: 0; 
  width: 100%; 
  height: 2px; 
  background: var(--gold); 
  z-index: -1; 
}
.divider-text { 
  background: #121212; 
  padding: 0 20px; 
  color: var(--gold); 
  font-family: var(--font-title); 
  font-size: 1.5rem; 
}

/* MODAL Y BOTÓN FLOTANTE */
.modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 1000; }
.modal-content { background: var(--parchment); padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; color: #000; position: relative; }
.close-modal { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; }
.floating-history-btn { 
  position: fixed; 
  bottom: 20px; 
  right: 20px; 
  width: 50px; 
  height: 50px; 
  border-radius: 50%; 
  background: var(--gold); 
  border: 2px solid #fff; 
  font-size: 1.5rem; 
  cursor: pointer; 
  box-shadow: 0 5px 10px rgba(0,0,0,0.5); 
  z-index: 900; 
}

/* BESTIARIO */
.bestiary-controls { background: rgba(0,0,0,0.5); padding: 15px; border-radius: 8px; margin-bottom: 20px; }
.filter-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }

/* RESPONSIVE */
@media (max-width: 600px) {
    .ability-scores-grid { grid-template-columns: repeat(3, 1fr); row-gap: 20px; }
    .main-title { font-size: 2rem; }
}
